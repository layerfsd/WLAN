#
# DO NOT EDIT THIS FILE!!!  Edit .\GNUsources. if you want to add a new source
# file to this component.  This file merely indirects to the real make file
# that is shared by all the driver components of the Windows NT DDK
#

SRCBASE = ../..

include $(SRCBASE)/GNUmakefile.inc

empty           :=
space           :=$(empty) $(empty)

TARGET_PROCS    := X86 ARM
TARGET_OSVERS   := 500 600

VALID_TARGETS   := $(foreach devos,$(TARGET_OSVERS),    \
                   $(foreach devproc,$(TARGET_PROCS),   \
                   ce$(devos)_$(devproc)))

TARGETS         ?=
TARGETS         += ce500_X86
TARGETS         += ce600_X86
TARGETS         += ce500_ARM
TARGETS         += ce600_ARM
TARGETS         += ce700_ARMV6
TARGETS         += ce700_ARMV7

CE_TARGETS       = $(filter ce500% ce600%,$(TARGETS))
WP_TARGETS       = $(filter ce700%,$(TARGETS))

ce_dhd: $(TARGETS)

# Windows CE 500 and 600 targets
$(CE_TARGETS): DEVOS=$(subst ce,,$(word 1,$(subst _,$(space),$@)))
$(CE_TARGETS): DEVPROC=$(word 2,$(subst _,$(space),$@))
$(CE_TARGETS):
	$(MAKE) WINCEVER=$(DEVOS) PROCESSOR=$(DEVPROC) $(ACTION)

# WindowsMobile (aka WindowsPhone) 7 targets.
$(WP_TARGETS): DEVOS=$(subst ce,,$(word 1,$(subst _,$(space),$@)))
$(WP_TARGETS): DEVPROC=$(word 2,$(subst _,$(space),$@))
$(WP_TARGETS):
	$(MAKE) -f builddriver.mk BUILD_ARCHS=$(DEVPROC) $(ACTION)

clean_dhd: ACTION=clean
clean_dhd: $(TARGETS)

# Display a list of available targets
help:
	@echo "To build WinCE 500 ARM driver"
	@echo "  $(MAKE) ce500_ARM"
	@echo "To build WinCE 600 ARM debug driver"
	@echo "  $(MAKE) TTYPE=DBG ce600_ARM"
	@echo "To build both retail and debug WP7 mobile armv6 drivers"
	@echo "  $(MAKE) ce700_ARMV6"
	@echo "To build debug versions of WP7 armv7 driver"
	@echo "  $(MAKE) BUILD_TYPES=debug ce700_ARMV7"

.PHONY: ce_dhd clean_dhd
